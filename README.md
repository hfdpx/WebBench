# WebBench  

## Introduction：

Linux下使用的服务器压力测试工具，适用于小型网站的服务器压力测试，最大可支持的3w多的并发连接

## Function
* 支持Http0.9，Http1.0，Http1.1协议  
* 支持get，head，options请求  
* 支持使用代理服务器  
* 支持静态页面测试也支持对动态页面(ASP,PHP,Java,CGI）进行测试
* 支持对含有SSL的安全网站如电子商务网站进行性能测试
* 支持对失败的连接进行类型统计分析  
## principle
利用fork建立多个子进程，每个子进程在测试时间内不断发送请求报文，建立多个连接，然后通过管道由父进程统计连接成功次数，连接失败次
数以及从服务器接受的数据量


## Module partition：  
* 构造报文模块：根据设定的参数和URL构造http请求报文 

* 子进程模块：子进程模拟客户，在测压时间内不断发送请求报文，请求建立连接，测压结束后将测试结果经过通道发送给父进程  

* 父进程模块：负责统计子进程的测试结果，展示给用户  

## Program model
  
![20170727175059721.png](https://i.loli.net/2019/05/10/5cd56d315e173.png)  

## Program usage
  
![20170727183214462.png](https://i.loli.net/2019/05/10/5cd574d50c9f5.png)

## Dependency Library
    ctags
## Command sample:  
    make 
    webbench -t 100 -c 60 -2 http://47.93.39.164:8080/
    命令-t -c先后皆可
## Improve：  
* 弃用了TRACE请求方法：一般服务器都不支持这个方法，支持这个方法的服务器存在跨站脚本漏洞，攻击者可以此漏洞欺骗合法用户并得到他们的私人信息  

* 增加了连接失败类型的统计，结果更加直观  

* 精简重构了代码，加上大量的注释代码不超过1000行


